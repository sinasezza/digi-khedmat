{% extends "base/base.html" %}
{% load static %}

{% block title %}حساب کاربری{% endblock title %}

{% block content %}
<div>
  <section class="dark:bg-gray-300 font-vazir">
    <div class="lg:w-1/3 mx-auto lg:py-6">
      <div class="place-items-center">
        <form action="" method="post" enctype="multipart/form-data">
          {% csrf_token %}

          <div class="flex flex-col items-center">
            <!-- User avatar -->
            <img id="profile-image" class="mt-4 w-20 h-20 rounded-full dark:opacity-70"
              src="{% if request.user.profile_photo %} {{ request.user.profile_photo.url }} {% else %}  {% static 'global/icons/add-profile-image.png' %} {% endif %}"
              alt="PROFILE" />
            <h2 class="text-xl text-gray-600">
              {{ user.username }}
            </h2>

            <a href="{% url 'accounts:change-password' %}" class="text-lg mt-4 rounded-md text-black underline hover:text-blue-700">
              تغییر رمز عبور
            </a>
          </div>
          <div>
            <label for="photos">
              بارگزاری عکس پروفایل جدید:
            </label>
          </div>
          <div class="ml-1 mt-2 flex justify-center rounded-lg border border-dashed border-gray-900">
            <div>
              <div class="mt-4 mr-2 flex text-sm">
                <label for="file-upload"
                  class="cursor-pointer font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500">
                  <span>
                    انتخاب عکس
                  </span>
                  <input id="file-upload" name="profile_photo" type="file" class="sr-only">
                </label>
              </div>
              <p class="text-xs">
                PNG, JPG up to 10MB
              </p>
            </div>
          </div>


            <div>
              <label for="username"> نام کاربری: </label>
              <div class="mt-2">
                <input maxlength="20" type="text" name="username" id="username" autocomplete="given-name"
                  style="text-align: center"
                  class="w-full rounded-md py-1.5 placeholder:text-gray-400 sm:text-sm sm:leading-6"
                  placeholder="{{ request.user.username }}" value="{{ request.user.username }}" />
              </div>
            </div>
            <div class="mt-6">
              <label for="name"> نام: </label>
              <div class="mt-2">
                <input maxlength="40" type="text" name="first_name" id="first_name" autocomplete="family-name"
                  style="text-align: center"
                  class="w-full rounded-md py-1.5 placeholder:text-gray-400 sm:text-sm sm:leading-6"
                  placeholder="{{ request.user.first_name }}" value="{{ request.user.first_name }}" />
              </div>
            </div>
            <div class="mt-6">
              <label for="name"> نام‌خانوادگی: </label>
              <div class="mt-2">
                <input maxlength="40" type="text" name="last_name" id="last_name" autocomplete="family-name"
                  style="text-align: center"
                  class="w-full rounded-md py-1.5 placeholder:text-gray-400 sm:text-sm sm:leading-6"
                  placeholder="{{ request.user.last_name }}" value="{{ request.user.last_name }}" />
              </div>
            </div>

            <div class="mt-6">
              <label for="phone"> شماره تلفن: </label>
              <div class="mt-2">
                <input maxlength="40" type="tel" name="phone_number" id="phone" autocomplete="family-name"
                  style="text-align: center"
                  class="w-full rounded-md py-1.5 placeholder:text-gray-400 sm:text-sm sm:leading-6"
                  placeholder="{{ request.user.phone_number }}" value="{{ request.user.phone_number }}" />
              </div>
            </div>

            <div class="mt-6">
              <label for="email"> ایمیل: </label>
              <div class="mt-2">
                <input maxlength="40" type="tel" name="email" id="email" autocomplete="family-name"
                  style="text-align: center"
                  class="w-full rounded-md py-1.5 placeholder:text-gray-400 sm:text-sm sm:leading-6"
                  placeholder="{{ request.user.email }}" value="{{ request.user.email }}" />
              </div>
            </div>

            <button
              class="mt-4 mb-2 dark:bg-white w-full py-1.5 rounded-md dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]"
              role="group">
              ثبت تغییرات
            </button>
        </form>
      </div>
    </div>
  </section>
</div>

{% endblock content %}

{% block custom_js %}
  <script>
    $(document).ready(function () {
      $("#file-upload").change(function () {
        var file = this.files[0];
        var reader = new FileReader();
        reader.onload = function (e) {
          $('#profile-image').attr('src', e.target.result);
        }
        reader.readAsDataURL(file);
      });
    });
  </script>
{% endblock custom_js %}
